[build]
builder = "nixpacks"
command = "npm run migrate && npm run build"

[deploy]
startCommand = "npm run start"
healthcheckPath = "/admin"
healthcheckTimeout = 300
restartPolicyType = "on_failure"

[env]
NODE_ENV = "production"
STRAPI_TELEMETRY_DISABLED = "true"
DATABASE_SSL = "true"
DATABASE_SSL_REJECT_UNAUTHORIZED = "false"
DATABASE_POOL_MIN = "2"
DATABASE_POOL_MAX = "5"
DATABASE_CONNECTION_TIMEOUT = "30000"
DATABASE_REQUEST_TIMEOUT = "30000"
APP_URL = "https://fixedv4-production-16eb.up.railway.app"
ADMIN_URL = "https://fixedv4-production-16eb.up.railway.app/admin"
